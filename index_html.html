<html>
<head>
  <title>BACKMOJI</title>
  <style>
    .avatar {
        width: 300px;
        display: inline-block;
    }
    img {
      width: auto;
    }
    input {
        text-align: center;
    }
  </style>
</head>

<body>
<h1>Backmoji - The Bitmoji Enumerator</h1>
<p>Backmoji takes a Bitmoji ID, version (usually the number 5), and a maximum value. Press the "Grab Images!" button and your browser will make "maximum value" requests for the images of that user's Bitmoji. Those images will be displayed below.</p>
<p>Below are links to Griffin's and Micah's blog posts that spurred this tool to be created.</p>
<ul>
    <li><a href src="https://hatless1der.com/a-snapchat-osint-tip-viewing-bitmoji-changes/" target="_blank">Griffin (Hatless1der Glynn - https://hatless1der.com/a-snapchat-osint-tip-viewing-bitmoji-changes/</a></li>
    <li><a href src="https://webbreacher.com/2022/10/24/grabbing-old-bitmoji-outfits-with-backmoji/" target="_blank">Micah (WebBreacher) Hoffman - https://webbreacher.com/2022/10/24/grabbing-old-bitmoji-outfits-with-backmoji/</a></li>
</ul>

<h2>The Bitmoji URL</h2>
Example URL: <code>https://images.bitmoji.com/3d/avatar/201714142-99792039934_3-s5-v1.webp</code>

<table border="3">
    <tr>
        <th>Bitmoji ID</th><th>Bitmoji<br>Version</th><th>S Value</th>
    </tr>
    <tr align="center">
        <td><code>99792039934</code></td><td><code>3</code></td><td><code>5</code></td>
    </tr>
</table>

<h2>Try the Tool</h2>
<!--    <ul>
        <li>Replace the default value with your Bitmoji ID: <input type="number" id="bid" size="13"></li>
        <li>Replace the default value with your version value: <input type="number" value="5" id="bversion" size="3" ></li>
        <li>Upper value: <input type="number" id="upperVal" size="3" ></li>
        <li>Bitmoji height (px): <input type="number" id="avatarHeight" value="200" size="4"></li>
    </ul> -->
<table border="3">
    <tr>
        <th>Bitmoji ID</th><th>Upper<br>value</th><th>S Value</th><th>Bitmoji<br>size (px)</th>
    </tr>
    <tr>
        <td><input type="text" id="bid"></td>
        <td><input type="text" id="upperVal" style="width: 50px;"></td>
        <td><input type="text" value="5" id="sValue" style="width: 50px;" ></td>
        <td><input type="text" id="avatarHeight" value="200" style="width: 70px;"></td>
    </tr>
</table>

    <button type="button" onclick="getInputValue();">Grab Images!</button>

    <div id="all"></div>

    <script type="text/javascript" style="display: none;">
        function getInputValue(){
            // Selecting the input element and get its value
            var userID = document.getElementById("bid").value;
            var sValue = document.getElementById("sValue").value;
            var upperValue = document.getElementById("upperVal").value;

            // Set Image size
            var avatarHeight = document.getElementById('avatarHeight').value;
            if(avatarHeight && (avatarHeight > 10)) {
                currentAvatarHeight = avatarHeight;
            } else {
                currentAvatarHeight = "200";
            }

            var all = document.querySelector("#all");
                const queryString = window.location.search;

            function nextImg(i) {
                var container = document.createElement('div');
                container.classList.add("avatar");
                var img = document.createElement('img');
                img.height = currentAvatarHeight;
                var id  = userID+"_"+i+"-s"+sValue;
                img.src= "https://images.bitmoji.com/3d/avatar/201714142-" + id + "-v1.webp";
                container.appendChild(img);
                const textNode = document.createElement("br");
                container.appendChild(textNode);

                // Make the hyperlinked text below image
                const x = document.createElement("A");
                const t = document.createTextNode(id);
                x.setAttribute("href", img.src);
                x.setAttribute('target', '_blank');
                x.appendChild(t);
                container.appendChild(x);

                all.appendChild(container);
                console.log(i)
                if (i==upperValue) {
                    return;
                } else {
                    setTimeout(() => nextImg(i+1), 500);
                }
            }

            nextImg(0);
        }
    </script>

    </body>
</html>
